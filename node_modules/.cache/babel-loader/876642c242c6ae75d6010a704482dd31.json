{"ast":null,"code":"import _defineProperty from\"/Users/roman/Documents/workspace/react-announcement/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/roman/Documents/workspace/react-announcement/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/roman/Documents/workspace/react-announcement/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Moment from'react-moment';export var AnnouncementListItem=function AnnouncementListItem(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isEdit=_useState2[0],setEdit=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSelected=_useState4[0],setSelected=_useState4[1];var _useState5=useState([{}]),_useState6=_slicedToArray(_useState5,2),similar=_useState6[0],setSimilar=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState({title:'',description:''}),_useState10=_slicedToArray(_useState9,2),form=_useState10[0],setForm=_useState10[1];var selectListItem=function selectListItem(){setSelected(!isSelected);var topArr=[];for(var i=0;i<props.arrayOfannouncements.length;i++){if(props.arrayOfannouncements[i].title.split(' ').some(function(elemnt){return props.announcement.title.split(' ').includes(elemnt);})&&props.arrayOfannouncements[i].description.split(' ').some(function(elemnt){return props.announcement.description.split(' ').includes(elemnt);})&&props.arrayOfannouncements[i].id!==props.announcement.id){if(topArr.length<3){topArr.push(props.arrayOfannouncements[i]);}}}setSimilar(topArr);};var changeAnnouncementHandler=function changeAnnouncementHandler(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.name,event.target.value)));};var editAnnouncements=function editAnnouncements(){setEdit(true);};var saveAnnouncements=function saveAnnouncements(){if(form.description===''||form.title===''){setError('enter all inputs');return;}var newAnnouncement=_objectSpread(_objectSpread({},form),{},{date:new Date(),isSelected:isSelected});props.changeAnnouncements(props.announcement.id,newAnnouncement);setError('');setEdit(false);setForm({title:'',description:''});};var cancelAnnouncements=function cancelAnnouncements(){setEdit(false);};var announcementSection=function announcementSection(){if(!isEdit){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"span\",{onClick:selectListItem},props.announcement.title)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-danger mr-1\",type:\"button\",onClick:function onClick(){return props.deleteAnnouncements(props.announcement.id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-trash\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-warning\",type:\"button\",onClick:editAnnouncements},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-pencil\"}))));}return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},error&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert alert-danger\",role:\"alert\"},error),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"ToDo title\",name:\"title\",value:form.title,onChange:changeAnnouncementHandler}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"ToDo description\",name:\"description\",value:form.description,onChange:changeAnnouncementHandler})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2 \"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-danger mr-1\",type:\"button\",onClick:cancelAnnouncements},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-ban\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-outline-success\",type:\"button\",onClick:saveAnnouncements},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-check-circle\"}))));};var selectedAnnouncementSection=function selectedAnnouncementSection(){if(isSelected){return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-2 border border-secondary\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"span\",null,\"Description: \",props.announcement.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\"},\"Create data:\",/*#__PURE__*/React.createElement(Moment,{format:\"YYYY/MM/DD\"},props.announcement.date))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-2 border border-secondary\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},\"Similar announcement:\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col off-set-1\"},similar.length>0?similar.map(function(item,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-2\",key:index+item.id},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"id: \".concat(item.id,\" \")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},\"title: \".concat(item.title)));}):'not found')))));}};return/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item mt-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},announcementSection(),selectedAnnouncementSection())));};","map":{"version":3,"sources":["/Users/roman/Documents/workspace/react-announcement/src/components/AnnouncementListItem.js"],"names":["React","useState","Moment","AnnouncementListItem","props","isEdit","setEdit","isSelected","setSelected","similar","setSimilar","error","setError","title","description","form","setForm","selectListItem","topArr","i","arrayOfannouncements","length","split","some","elemnt","announcement","includes","id","push","changeAnnouncementHandler","event","target","name","value","editAnnouncements","saveAnnouncements","newAnnouncement","date","Date","changeAnnouncements","cancelAnnouncements","announcementSection","deleteAnnouncements","selectedAnnouncementSection","map","item","index"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Moment from 'react-moment';\n\nexport const AnnouncementListItem = (props) => {\n  const [isEdit, setEdit] = useState(false);\n  const [isSelected, setSelected] = useState(false);\n  const [similar, setSimilar] = useState([{}]);\n  const [error, setError] = useState('');\n  const [form, setForm] = useState({\n    title: '',\n    description: '',\n  });\n\n  const selectListItem = () => {\n    setSelected(!isSelected);\n    const topArr = [];\n\n    for (let i = 0; i < props.arrayOfannouncements.length; i++) {\n      if (\n        props.arrayOfannouncements[i].title\n          .split(' ')\n          .some((elemnt) =>\n            props.announcement.title.split(' ').includes(elemnt)\n          ) &&\n        props.arrayOfannouncements[i].description\n          .split(' ')\n          .some((elemnt) =>\n            props.announcement.description.split(' ').includes(elemnt)\n          ) &&\n        props.arrayOfannouncements[i].id !== props.announcement.id\n      ) {\n        if (topArr.length < 3) {\n          topArr.push(props.arrayOfannouncements[i]);\n        }\n      }\n    }\n    setSimilar(topArr);\n  };\n\n  const changeAnnouncementHandler = (event) => {\n    setForm({ ...form, [event.target.name]: event.target.value });\n  };\n\n  const editAnnouncements = () => {\n    setEdit(true);\n  };\n\n  const saveAnnouncements = () => {\n    if (form.description === '' || form.title === '') {\n      setError('enter all inputs');\n      return;\n    }\n    const newAnnouncement = {\n      ...form,\n      date: new Date(),\n      isSelected: isSelected,\n    };\n    props.changeAnnouncements(props.announcement.id, newAnnouncement);\n    setError('');\n    setEdit(false);\n    setForm({ title: '', description: '' });\n  };\n\n  const cancelAnnouncements = () => {\n    setEdit(false);\n  };\n\n  const announcementSection = () => {\n    if (!isEdit) {\n      return (\n        <div className=\"row\">\n          <div className=\"col-10\">\n            <span onClick={selectListItem}>{props.announcement.title}</span>\n          </div>\n          <div className=\"col-2\">\n            <button\n              className=\"btn btn-outline-danger mr-1\"\n              type=\"button\"\n              onClick={() => props.deleteAnnouncements(props.announcement.id)}\n            >\n              <i className=\"fa fa-trash\"></i>\n            </button>\n            <button\n              className=\"btn btn-outline-warning\"\n              type=\"button\"\n              onClick={editAnnouncements}\n            >\n              <i className=\"fa fa-pencil\"></i>\n            </button>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div className=\"row\">\n        <div className=\"col-10\">\n          {error && (\n            <div className=\"alert alert-danger\" role=\"alert\">\n              {error}\n            </div>\n          )}\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"ToDo title\"\n            name=\"title\"\n            value={form.title}\n            onChange={changeAnnouncementHandler}\n          />\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"ToDo description\"\n            name=\"description\"\n            value={form.description}\n            onChange={changeAnnouncementHandler}\n          />\n        </div>\n        <div className=\"col-2 \">\n          <button\n            className=\"btn btn-outline-danger mr-1\"\n            type=\"button\"\n            onClick={cancelAnnouncements}\n          >\n            <i className=\"fa fa-ban\"></i>\n          </button>\n          <button\n            className=\"btn btn-outline-success\"\n            type=\"button\"\n            onClick={saveAnnouncements}\n          >\n            <i className=\"fa fa-check-circle\"></i>\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  const selectedAnnouncementSection = () => {\n    if (isSelected) {\n      return (\n        <div className=\"container\">\n          <div className=\"row mt-2 border border-secondary\">\n            <div className=\"col\">\n              <span>Description: {props.announcement.description}</span>\n            </div>\n            <div className=\"col-3\">\n              Create data:\n              <Moment format=\"YYYY/MM/DD\">{props.announcement.date}</Moment>\n            </div>\n          </div>\n          <div className=\"row mt-2 border border-secondary\">\n            <div className=\"col\">\n              <div className=\"row\">\n                <div className=\"col\">Similar announcement:</div>\n              </div>\n              <div className=\"row mt-2\">\n                <div className=\"col off-set-1\">\n                  {similar.length > 0\n                    ? similar.map((item, index) => (\n                        <div className=\"row mt-2\" key={index + item.id}>\n                          <div className=\"col-6\">{`id: ${item.id} `}</div>\n                          <div className=\"col-6\">{`title: ${item.title}`}</div>\n                        </div>\n                      ))\n                    : 'not found'}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  };\n\n  return (\n    <li className=\"list-group-item mt-1\">\n      <div className=\"row\">\n        <div className=\"col-12\">\n          {announcementSection()}\n          {selectedAnnouncementSection()}\n        </div>\n      </div>\n    </li>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}